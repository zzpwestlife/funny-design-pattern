### 代码规范

这是最基本的，变量命名、分支判断、异常捕获等，养成好的习惯。

面向过程的代码：程序不容易维护、不容易扩展、不容易复用。

举例：活字印刷术
- 可维护：要改，只需更改要改之字；
- 可复用：这些字并非用完这次就无用，玩去可以在后来的印刷中重复使用；
- 可扩展：若要加字，只需另刻字加入即可；
- 灵活性好：字的排列可以是竖排也可以是横排，只需将活字移动就可以满足排列要求。

面向对象的好处：通过封装、继承、多态把耦合度降低，用设计模式使程序变得更加灵活、容易修改，并且易于复用。

### 复用 不等于 复制

用尽可能的办法避免重复，即 DRY 原则。

## 代码

### 1. 面向过程的计算器 `Calculator.php`

### 2. 计算与显示分离  `Calculator2.php`

业务逻辑与界面逻辑分开，降低其耦合度，只有分离开，才可以达到容易维护和扩展。

### 3. 松耦合 `Calculator3`

以上优化只用到了面向对象的封装特性，其余两个特性还没有用到。

如果增加一个开根运算，代码怎么改？目前看来，只能增加一个 switch 分支，这就破坏了开闭原则（后面会讲到）。

修改的同时可能会改动其他运算的代码，即使不改，也会看到其他运算的实现逻辑，这也是不合理的。

应该把各个运算分离，修改其中一个不会影响到另外几个，增加运算算法也不影响其他代码。

实现：抽象运算类，包含两个数字属性和一个抽象计算方法，然后加减乘除都继承该运算类，实现具体的计算方法。

这样更改任何一个算法，都不会影响到其他算法的代码，增加算法，只需增加一个类即可。

那么如何去实例化对象呢？要用到简单工厂模式。

###  简单工厂模式

用一个单独的类来做这个创造实例的过程，这就是工厂。

只需输入运算符号，工厂就实例化出合适的对象，通过多态，返回父类的方式实现计算器的结果。